<odoo>
    <record id="view_material_requisition_extends_form" model="ir.ui.view">
        <field name="name">material.requisition.extends.form</field>
        <field name="model">material.requisition</field>
        <field name="inherit_id" ref="azk_material_requisition.material_requisition_form_view"/>
        <field name="arch" type="xml">
            <group name="general_info" position="inside">
                <field name="user_id" readonly="1"/>
                <field name="employee_id"/>
                <field name="employee_manager_id" readonly="1"/>
            </group>
            <field name="location_ids" position="attributes">
                <attribute name="readonly">not can_edit_locations and state not in ('new', 'sent', 'inventory_manager_approval')</attribute>
            </field>
            <header position="inside">
                <button name="action_move_to_sent" type="object" string="Send" invisible="state == 'new'" class="btn-primary"/>
                <button name="action_send" type="object" string="Send to Employee Manager" invisible="state == 'sent'" class="btn-primary"/>
                <button name="action_employee_manager_approve" type="object" string="Employee Manager Approve" invisible="state == 'employee_manager_approval'" class="btn-primary" groups="base.group_user"/>
                <button name="action_inventory_manager_approve" type="object" string="Inventory Manager Approve" invisible="state == 'inventory_manager_approval'" class="btn-primary" groups="azk_material_requisition_extends.azk_material_requisition_inventory_manager_group"/>
                <button name="action_approve" type="object" string="Approve" invisible="state == 'in_progress'" class="btn-primary"/>
                <button name="action_done" type="object" string="Mark as Done" invisible="state == 'approved'" class="btn-success"/>
                <button name="action_reset_to_new" type="object" string="Reset to New" invisible="state not in ('sent','employee_manager_approval','inventory_manager_approval','approved','in_progress','done')" class="btn-secondary"/>
            </header>
            <xpath expr="//field[@name='state']" position="replace">
                <field name="state" widget="statusbar"
                    selection="[('new', 'New'), ('sent', 'Sent'), ('employee_manager_approval', 'Employee Manager Approval'), ('inventory_manager_approval', 'Inventory Manager Approval'), ('in_progress', 'In Progress'), ('approved', 'Approved'),  ('done', 'Done')]"/>
            </xpath>
        </field>
    </record>
</odoo> 